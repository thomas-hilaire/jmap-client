!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.jmap=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]={Client:a("./client/Client"),Utils:a("./utils/Utils"),JSONBuilder:a("./utils/JSONBuilder"),PromiseProvider:a("./promises/PromiseProvider"),ES6PromiseProvider:a("./promises/ES6PromiseProvider"),QPromiseProvider:a("./promises/QPromiseProvider"),Transport:a("./transport/Transport"),JQueryTransport:a("./transport/JQueryTransport"),RequestTransport:a("./transport/RequestTransport"),Model:a("./models/Model"),Account:a("./models/Account"),EMailer:a("./models/EMailer"),Mailbox:a("./models/Mailbox"),MessageList:a("./models/MessageList"),Message:a("./models/Message"),OutboundMessage:a("./models/OutboundMessage"),CreateMessageAck:a("./models/CreateMessageAck"),Thread:a("./models/Thread"),MessagesSet:a("./models/MessagesSet"),MailboxRole:a("./models/MailboxRole"),AuthAccess:a("./models/AuthAccess"),AuthContinuation:a("./models/AuthContinuation"),Constants:a("./utils/Constants"),Attachment:a("./models/Attachment")},b.exports=c["default"]},{"./client/Client":2,"./models/Account":3,"./models/Attachment":4,"./models/AuthAccess":5,"./models/AuthContinuation":6,"./models/CreateMessageAck":7,"./models/EMailer":8,"./models/Mailbox":9,"./models/MailboxRole":10,"./models/Message":11,"./models/MessageList":12,"./models/MessagesSet":13,"./models/Model":14,"./models/OutboundMessage":15,"./models/Thread":16,"./promises/ES6PromiseProvider":17,"./promises/PromiseProvider":18,"./promises/QPromiseProvider":19,"./transport/JQueryTransport":20,"./transport/RequestTransport":21,"./transport/Transport":22,"./utils/Constants":23,"./utils/JSONBuilder":24,"./utils/Utils":25}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("./../promises/ES6PromiseProvider.js"),i=d(h),j=a("./../utils/Utils.js"),k=d(j),l=a("./../models/Account.js"),m=d(l),n=a("./../models/Mailbox.js"),o=d(n),p=a("./../models/MessageList.js"),q=d(p),r=a("./../models/Thread.js"),s=d(r),t=a("./../models/Message.js"),u=d(t),v=a("./../models/OutboundMessage.js"),w=d(v),x=a("./../models/CreateMessageAck.js"),y=d(x),z=a("./../models/MessagesSet.js"),A=d(z),B=a("./../models/MailboxRole.js"),C=d(B),D=a("./../models/AuthContinuation.js"),E=d(D),F=a("./../models/AuthAccess.js"),G=d(F),H=a("../utils/Constants.js"),I=d(H),J=function(){function a(b,c){f(this,a),k["default"].assertRequiredParameterIsPresent(b,"transport"),this.transport=b,this.transport.promiseProvider=c||new i["default"]}return g(a,[{key:"withAuthenticationUrl",value:function(a){return this.authenticationUrl=a,this}},{key:"withAuthenticationToken",value:function(a){return this.authToken=a,this}},{key:"withAPIUrl",value:function(a){return this.apiUrl=a,this}},{key:"withDownloadUrl",value:function(a){return this.downloadUrl=a,this}},{key:"authenticate",value:function(a,b,c){var d,e=this;return this.transport.post(this.authenticationUrl,this._defaultNonAuthenticatedHeaders(),{username:a,deviceName:b,clientName:I["default"].CLIENT_NAME,clientVersion:I["default"].VERSION}).then(function(a){return d=new E["default"](a)}).then(function(a){return c(a)}).then(function(a){if(d.methods.indexOf(a.method)<0)throw new Error('The "'+a.method+'" authentication protocol is not supported by the server.');var b={token:d.continuationToken,method:a.method};return a.password&&(b.password=a.password),e.transport.post(e.authenticationUrl,e._defaultNonAuthenticatedHeaders(),b)}).then(function(a){return new G["default"](a)})}},{key:"authExternal",value:function(a,b,c){return this.authenticate(a,b,function(a){return c(a).then(function(){return{method:"external"}})})}},{key:"authPassword",value:function(a,b,c){return this.authenticate(a,c,function(a){return{method:"password",password:b}})}},{key:"getAccounts",value:function(a){return this._jmapRequest("getAccounts",a)}},{key:"getMailboxes",value:function(a){return this._jmapRequest("getMailboxes",a)}},{key:"getMailboxWithRole",value:function(a,b){if(a instanceof C["default"]||(a=C["default"].fromRole(a)),a===C["default"].UNKNOWN)throw new Error("A valid role is required to find a mailbox by role");return this._jmapRequest("getMailboxes",b).then(function(b){for(var c=0;c<b.length;c++)if(b[c].role===a)return b[c];throw new Error("Cannot find a mailbox with role "+a.role)})}},{key:"getMessageList",value:function(a){return this._jmapRequest("getMessageList",a)}},{key:"getThreads",value:function(a){return this._jmapRequest("getThreads",a)}},{key:"getMessages",value:function(a){return this._jmapRequest("getMessages",a)}},{key:"setMessages",value:function(a){return this._jmapRequest("setMessages",a)}},{key:"saveAsDraft",value:function(a){var b=this;k["default"].assertRequiredParameterHasType(a,"message",w["default"]);var c=this._generateClientId();return this.getMailboxWithRole(C["default"].DRAFTS).then(function(d){return a.mailboxIds=[d.id],a.isDraft=!0,b.setMessages({create:e({},c,a.toJSONObject())})}).then(function(a){if(!a.created[c])throw new Error("Failed to save the message as draft, clientId: "+c+", message: "+(a.notCreated[c]||"none"));return new y["default"](b,a.created[c])})}},{key:"moveMessage",value:function(a,b){return k["default"].assertRequiredParameterIsPresent(a,"id"),k["default"].assertRequiredParameterIsArrayWithMinimumLength(b,"mailboxIds",1),this.setMessages({update:e({},a,{mailboxIds:b})}).then(function(b){if(b.updated.indexOf(a)<0)throw new Error("Failed to move message "+a+", reason is "+b.notUpdated[a])})}},{key:"_generateClientId",value:function(){return Date.now()}},{key:"_defaultNonAuthenticatedHeaders",value:function(){return{Accept:"application/json; charset=UTF-8","Content-Type":"application/json; charset=UTF-8"}}},{key:"_defaultHeaders",value:function(){return{Accept:"application/json","Content-Type":"application/json",Authorization:this.authToken}}},{key:"_jmapRequest",value:function(a,b){var c=this;return this.transport.post(this.apiUrl,this._defaultHeaders(),[[a,b||{},"#0"]]).then(k["default"].assertValidJMAPResponse.bind(null,a)).then(function(a){return a.map(c._handleResponse.bind(c))}).then(function(a){return a.length>1?a:a[0]})}},{key:"_handleResponse",value:function(a){var b=a[0],c=this["_handle"+k["default"].capitalize(b)+"Response"];return c?c.bind(this)(a):a[1]}},{key:"_handleListResponse",value:function(a,b){return k["default"]._jsonArrayToModelList(this,b,a[1].list)}},{key:"_handleAccountsResponse",value:function(a){return this._handleListResponse(a,m["default"])}},{key:"_handleThreadsResponse",value:function(a){return this._handleListResponse(a,s["default"])}},{key:"_handleMessagesResponse",value:function(a){return this._handleListResponse(a,u["default"])}},{key:"_handleMailboxesResponse",value:function(a){return this._handleListResponse(a,o["default"])}},{key:"_handleMessageListResponse",value:function(a){return q["default"].fromJSONObject(this,a[1])}},{key:"_handleMessagesSetResponse",value:function(a){return A["default"].fromJSONObject(this,a[1])}}]),a}();c["default"]=J,b.exports=c["default"]},{"../utils/Constants.js":23,"./../models/Account.js":3,"./../models/AuthAccess.js":5,"./../models/AuthContinuation.js":6,"./../models/CreateMessageAck.js":7,"./../models/Mailbox.js":9,"./../models/MailboxRole.js":10,"./../models/Message.js":11,"./../models/MessageList.js":12,"./../models/MessagesSet.js":13,"./../models/OutboundMessage.js":15,"./../models/Thread.js":16,"./../promises/ES6PromiseProvider.js":17,"./../utils/Utils.js":25}],3:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=function(a){function b(a,c,d){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),l["default"].assertRequiredParameterIsPresent(c,"id"),d=d||{},this.id=c,this.name=d.name||"",this.isPrimary=d.isPrimary||!1,this.isReadOnly=d.isReadOnly||!1}return f(b,a),g(b,[{key:"getMailboxes",value:function(a){return a=a||{},a.accountId=this.id,this._jmap.getMailboxes(a)}}],[{key:"fromJSONObject",value:function(a,c){return l["default"].assertRequiredParameterIsPresent(c,"object"),new b(a,c.id,c)}}]),b}(j["default"]);c["default"]=m,b.exports=c["default"]},{"../utils/Utils.js":25,"./Model.js":14}],4:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=a("../utils/JSONBuilder.js"),n=d(m),o=function(a){function b(a,c,d){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),l["default"].assertRequiredParameterIsPresent(c,"blobId"),d=d||{},this.blobId=c,this.type=d.type||null,this.name=d.name||null,this.size=d.size||null,this.cid=d.cid||null,this.isInline=d.isInline||!1,this.width=d.width||null,this.height=d.height||null,this.url=d.url||null,!this.url&&a.downloadUrl&&(this.url=l["default"].fillURITemplate(a.downloadUrl,{blobId:this.blobId,name:this.name||this.blobId}))}return f(b,a),g(b,[{key:"toJSONObject",value:function(){return(new n["default"]).appendIfDefined("blobId",this.blobId).appendIfDefined("type",this.type).appendIfDefined("name",this.name).appendIfDefined("size",this.size).appendIfDefined("cid",this.cid).appendIfDefined("width",this.width).appendIfDefined("height",this.height).appendIfDefined("url",this.url).appendIfDefined("isInline",this.isInline).build()}}],[{key:"fromJSONObject",value:function(a,c){return l["default"].assertRequiredParameterIsPresent(c,"object"),new b(a,c.blobId,c)}}]),b}(j["default"]);c["default"]=o,b.exports=c["default"]},{"../utils/JSONBuilder.js":24,"../utils/Utils.js":25,"./Model.js":14}],5:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=a("../utils/Utils.js"),g=d(f),h=function i(a){e(this,i),g["default"].assertRequiredParameterIsPresent(a,"payload"),g["default"].assertRequiredParameterIsPresent(a.accessToken,"accessToken"),g["default"].assertRequiredParameterIsPresent(a.api,"api"),g["default"].assertRequiredParameterIsPresent(a.eventSource,"eventSource"),g["default"].assertRequiredParameterIsPresent(a.upload,"upload"),g["default"].assertRequiredParameterIsPresent(a.download,"download"),this.accessToken=a.accessToken,this.api=a.api,this.eventSource=a.eventSource,this.upload=a.upload,this.download=a.download};c["default"]=h,b.exports=c["default"]},{"../utils/Utils.js":25}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=a("../utils/Utils.js"),g=d(f),h=function i(a){e(this,i),g["default"].assertRequiredParameterIsPresent(a,"payload"),g["default"].assertRequiredParameterIsPresent(a.continuationToken,"continuationToken"),g["default"].assertRequiredParameterIsArrayWithMinimumLength(a.methods,"methods"),this.continuationToken=a.continuationToken,this.methods=a.methods,this.prompt=a.prompt||null};c["default"]=h,b.exports=c["default"]},{"../utils/Utils.js":25}],7:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a("./Model.js"),i=d(h),j=a("../utils/Utils.js"),k=d(j),l=function(a){function b(a,c){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),k["default"].assertRequiredParameterIsObject(c,"response"),k["default"].assertRequiredParameterIsPresent(c.blobId,"response.blobId"),k["default"].assertRequiredParameterHasType(c.size,"response.size","number"),this.id=c.id,this.blobId=c.blobId,this.size=c.size,this.threadId=c.threadId}return f(b,a),b}(i["default"]);c["default"]=l,b.exports=c["default"]},{"../utils/Utils.js":25,"./Model.js":14}],8:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){d(this,a),b=b||{},this.name=b.name||"",this.email=b.email||"@"}return e(a,null,[{key:"unknown",value:function(){return new a}}]),a}();c["default"]=f,b.exports=c["default"]},{}],9:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=a("./MailboxRole.js"),n=d(m),o=function(a){function b(a,c,d,f){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),l["default"].assertRequiredParameterIsPresent(c,"id"),l["default"].assertRequiredParameterIsPresent(d,"name"),f=f||{},this.id=c,this.name=d,this.parentId=f.parentId||null,this.role=n["default"].fromRole(f.role),this.sortOrder=f.sortOrder||0,this.mustBeOnlyMailbox=f.mustBeOnlyMailbox||!1,this.mayReadItems=f.mayReadItems||!1,this.mayAddItems=f.mayAddItems||!1,this.mayRemoveItems=f.mayRemoveItems||!1,this.mayCreateChild=f.mayCreateChild||!1,this.mayRename=f.mayRename||!1,this.mayDelete=f.mayDelete||!1,this.totalMessages=f.totalMessages||0,this.unreadMessages=f.unreadMessages||0,this.totalThreads=f.totalThreads||0,this.unreadThreads=f.unreadThreads||0}return f(b,a),g(b,[{key:"getMessageList",value:function(a){return a=a||{},a.filter={inMailboxes:[this.id]},this._jmap.getMessageList(a)}}],[{key:"fromJSONObject",value:function(a,c){return l["default"].assertRequiredParameterIsPresent(c,"object"),new b(a,c.id,c.name,c)}}]),b}(j["default"]);c["default"]=o,b.exports=c["default"]},{"../utils/Utils.js":25,"./MailboxRole.js":10,"./Model.js":14}],10:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("../utils/Utils.js"),h=(d(g),function(){function a(b){e(this,a),this.value=b}return f(a,null,[{key:"fromRole",value:function(b){if(b)for(var c in a)if(a.hasOwnProperty(c)&&a[c].value===b)return a[c];return a.UNKNOWN}}]),a}());["inbox","archive","drafts","outbox","sent","trash","spam","templates"].forEach(function(a){h[a.toUpperCase()]=new h(a)}),h.UNKNOWN=new h(null),c["default"]=h,b.exports=c["default"]},{"../utils/Utils.js":25}],11:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("./Model.js"),j=d(i),k=a("./EMailer.js"),l=d(k),m=a("../utils/Utils.js"),n=d(m),o=a("./MailboxRole.js"),p=(d(o),a("./Attachment.js")),q=d(p),r=function(a){function b(a,c,d,f,g){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),n["default"].assertRequiredParameterIsPresent(c,"id"),n["default"].assertRequiredParameterIsPresent(d,"threadId"),n["default"].assertRequiredParameterIsArrayWithMinimumLength(f,"mailboxIds",1),g=g||{},this.id=c,this.threadId=d,this.mailboxIds=f,this.inReplyToMessageId=g.inReplyToMessageId||null,this.isUnread=g.isUnread||!1,this.isFlagged=g.isFlagged||!1,this.isAnswered=g.isAnswered||!1,this.isDraft=g.isDraft||!1,this.hasAttachment=g.hasAttachment||!1,this.headers=g.headers||{},this.from=g.from||l["default"].unknown(),this.to=g.to||[l["default"].unknown()],this.cc=g.cc||[l["default"].unknown()],this.bcc=g.bcc||[l["default"].unknown()],this.replyTo=g.replyTo||l["default"].unknown(),this.subject=g.subject||null,this.date=g.date?new Date(g.date):null,this.size=g.size||0,this.preview=g.preview||null,this.textBody=g.textBody||null,this.htmlBody=g.htmlBody||null,this.attachments=n["default"]._jsonArrayToModelList(a,q["default"],g.attachments)}return f(b,a),g(b,[{key:"move",value:function(a){return this._jmap.moveMessage(this.id,a)}},{key:"moveToMailboxWithRole",value:function(a){var b=this;return this._jmap.getMailboxWithRole(a).then(function(a){return b.move([a.id])})}}],[{key:"fromJSONObject",value:function(a,c){return n["default"].assertRequiredParameterIsPresent(c,"object"),new b(a,c.id,c.threadId,c.mailboxIds,c)}}]),b}(j["default"]);c["default"]=r,b.exports=c["default"]},{"../utils/Utils.js":25,"./Attachment.js":4,"./EMailer.js":8,"./MailboxRole.js":10,"./Model.js":14}],12:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=function(a){function b(a,c){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),c=c||{},this.accountId=c.accountId||"",this.filter=c.filter||null,this.sort=c.sort||null,this.collapseThreads=c.collapseThreads||!1,this.position=c.position||0,this.total=c.total||0,this.threadIds=c.threadIds||[],this.messageIds=c.messageIds||[]}return f(b,a),g(b,[{key:"getThreads",value:function(a){return a=a||{},a.ids=this.threadIds,this._jmap.getThreads(a)}},{key:"getMessages",value:function(a){return a=a||{},a.ids=this.messageIds,this._jmap.getMessages(a)}}],[{key:"fromJSONObject",value:function(a,c){return l["default"].assertRequiredParameterIsPresent(c,"object"),new b(a,c)}}]),b}(j["default"]);c["default"]=m,b.exports=c["default"]},{"../utils/Utils.js":25,"./Model.js":14}],13:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=function(a){function b(a,c){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),c=c||{},this.accountId=c.accountId||"",this.created=c.created||{},this.updated=c.updated||[],this.destroyed=c.destroyed||[],this.notCreated=c.notCreated||{},this.notUpdated=c.notUpdated||{},this.notDestroyed=c.notDestroyed||{}}return f(b,a),g(b,null,[{key:"fromJSONObject",value:function(a,c){return l["default"].assertRequiredParameterIsPresent(c,"object"),new b(a,c)}}]),b}(j["default"]);c["default"]=m,b.exports=c["default"]},{"../utils/Utils.js":25,"./Model.js":14}],14:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(a){d(this,f),this._jmap=a};c["default"]=e,b.exports=c["default"]},{}],15:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=a("./Attachment.js"),n=d(m),o=a("../utils/JSONBuilder.js"),p=d(o),q=function(a){function b(a,c){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),c=c||{},this.mailboxIds=c.mailboxIds||[],this.inReplyToMessageId=c.inReplyToMessageId||null,this.isUnread=c.isUnread,this.isFlagged=c.isFlagged,this.isAnswered=c.isAnswered,this.isDraft=c.isDraft,this.headers=c.headers||null,this.from=c.from||null,this.to=c.to||null,this.cc=c.cc||null,this.bcc=c.bcc||null,this.replyTo=c.replyTo||null,this.subject=c.subject||null,this.textBody=c.textBody||null,this.htmlBody=c.htmlBody||null,this.attachments=l["default"]._jsonArrayToModelList(a,n["default"],c.attachments)}return f(b,a),g(b,[{key:"toJSONObject",value:function(){return(new p["default"]).appendIfNotEmpty("mailboxIds",this.mailboxIds).appendIfDefined("inReplyToMessageId",this.inReplyToMessageId).appendIfDefined("isUnread",this.isUnread).appendIfDefined("isFlagged",this.isFlagged).appendIfDefined("isAnswered",this.isAnswered).appendIfDefined("isDraft",this.isDraft).appendIfDefined("headers",this.headers).appendIfDefined("from",this.from).appendIfDefined("to",this.to).appendIfDefined("cc",this.cc).appendIfDefined("bcc",this.bcc).appendIfDefined("replyTo",this.replyTo).appendIfDefined("subject",this.subject).appendIfDefined("textBody",this.textBody).appendIfDefined("htmlBody",this.htmlBody).appendIfNotEmpty("attachments",this.attachments).build()}}]),b}(j["default"]);c["default"]=q,b.exports=c["default"]},{"../utils/JSONBuilder.js":24,"../utils/Utils.js":25,"./Attachment.js":4,"./Model.js":14}],16:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=function(a){function b(a,c,d){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),l["default"].assertRequiredParameterIsPresent(c,"id"),d=d||{},this.id=c,this.messageIds=d.messageIds||[]}return f(b,a),g(b,[{key:"getMessages",value:function(a){return a=a||{},a.ids=this.messageIds,this._jmap.getMessages(a)}}],[{key:"fromJSONObject",value:function(a,c){return l["default"].assertRequiredParameterIsPresent(c,"object"),new b(a,c.id,c)}}]),b}(j["default"]);c["default"]=m,b.exports=c["default"]},{"../utils/Utils.js":25,"./Model.js":14}],17:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g);
}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("./PromiseProvider.js"),j=d(i),k=function(a){function b(){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).apply(this,arguments)}return f(b,a),g(b,[{key:"newPromise",value:function(a){return new Promise(a)}}]),b}(j["default"]);c["default"]=k,b.exports=c["default"]},{"./PromiseProvider.js":18}],18:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"newPromise",value:function(a){throw new Error("PromiseProvider is an abstract class. Please use a concrete implementation.")}}]),a}();c["default"]=f,b.exports=c["default"]},{}],19:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("./PromiseProvider.js"),j=d(i),k=function(b){function c(){e(this,c),h(Object.getPrototypeOf(c.prototype),"constructor",this).apply(this,arguments)}return f(c,b),g(c,[{key:"newPromise",value:function(b){return a("q").Promise(b)}}]),c}(j["default"]);c["default"]=k,b.exports=c["default"]},{"./PromiseProvider.js":18,q:"q"}],20:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("./Transport.js"),j=d(i),k=function(a){function b(a){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.promiseProvider=a}return f(b,a),g(b,[{key:"post",value:function(a,b,c){return this.promiseProvider.newPromise(function(d,e){jQuery.ajax({url:a,method:"POST",headers:b,data:JSON.stringify(c),dataType:"json",processData:!1,jsonp:!1}).done(d).fail(function(b,c,d){return e(new Error("POST on "+a+" returned "+b.status+" ("+(c||d)+")."))})})}}]),b}(j["default"]);c["default"]=k,b.exports=c["default"]},{"./Transport.js":22}],21:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},i=a("./Transport.js"),j=d(i),k=[200,201],l=function(b){function c(a){e(this,c),h(Object.getPrototypeOf(c.prototype),"constructor",this).call(this),this.promiseProvider=a}return f(c,b),g(c,[{key:"post",value:function(b,c,d){return this.promiseProvider.newPromise(function(e,f){a("request")({url:b,headers:c,method:"POST",body:d,json:!0},function(a,c,d){return a?f(a):k.indexOf(c.statusCode)<0?f(new Error("POST on "+b+" returned "+c.statusCode+". "+d)):void e(d)})})}}]),c}(j["default"]);c["default"]=l,b.exports=c["default"]},{"./Transport.js":22,request:"request"}],22:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"post",value:function(a,b,c){throw new Error("Transport is an abstract class. Please use a concrete implementation.")}}]),a}();c["default"]=f,b.exports=c["default"]},{}],23:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]={VERSION:"0.0.6-dev",CLIENT_NAME:"jmap-client (https://github.com/linagora/jmap-client)"},b.exports=c["default"]},{}],24:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("../utils/Utils.js"),h=d(g),i=function(){function a(){e(this,a),this.result={}}return f(a,[{key:"append",value:function(a,b){return h["default"].assertRequiredParameterIsPresent(a,"name"),h["default"].assertRequiredParameterIsPresent(b,"value"),this.result[a]=b,this}},{key:"appendIfDefined",value:function(a,b){return h["default"].isDefined(b)&&this.append(a,b),this}},{key:"appendIfNotEmpty",value:function(a,b){return b&&(h["default"].assertRequiredParameterIsArrayWithMinimumLength(b,a),b.length>0&&this.append(a,b.map(function(a){return a.toJSONObject?a.toJSONObject():a}))),this}},{key:"build",value:function(){return this.result}}]),a}();c["default"]=i,b.exports=c["default"]},{"../utils/Utils.js":25}],25:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){throw d(this,a),new Error("The Utils class cannot be instantiated.")}return e(a,null,[{key:"isDefined",value:function(a){return"undefined"!=typeof a&&null!==a}},{key:"assertRequiredParameterIsPresent",value:function(b,c){if(!a.isDefined(b))throw new Error('The "'+c+'" parameter is required.');return b}},{key:"assertRequiredParameterIsObject",value:function(b,c){if(a.assertRequiredParameterIsPresent(b,c),"object"!=typeof b||Array.isArray(b))throw new Error('The "'+c+'" parameter is not an object.');return b}},{key:"assertRequiredParameterHasType",value:function(b,c,d){if(a.assertRequiredParameterIsPresent(b,c),"string"==typeof d){if(typeof b!==d)throw new Error('The "'+c+'" parameter has not the expected type: '+d)}else if(!(b instanceof d))throw new Error('The "'+c+'" parameter has not the expected type: '+d);return b}},{key:"assertRequiredParameterIsArrayWithMinimumLength",value:function(a,b,c){if(!Array.isArray(a))throw new Error('The "'+b+'" parameter must be an Array.');if(c&&a.length<c)throw new Error('The "'+b+'" parameter must have at least '+c+" element(s).");return a}},{key:"assertValidJMAPResponse",value:function(b,c){function d(a){return 0===a.filter(function(a){return!Array.isArray(a)}).length}if(!c||!Array.isArray(c))throw new Error('Expected an array as the JMAP response for a "'+b+'" request.');if(0===c.length||!d(c))throw new Error('Expected an array of exactly 1 array element as the JMAP response for a "'+b+'" request.');var e=a._expectedResponseFor(b);if(e&&c[0][0]!==e)throw new Error('Expected "'+e+'" as the JMAP response for a "'+b+'" request, but got "'+c[0][0]+'".');if(!c[0][1])throw new Error('The JMAP response for a "'+b+'" request should return some data.');return c}},{key:"capitalize",value:function(a){return a&&"string"==typeof a?a.charAt(0).toUpperCase()+a.substring(1):a}},{key:"fillURITemplate",value:function(b,c){return a.assertRequiredParameterIsPresent(b,"uri"),c?b.replace(/{(.+?)}/g,function(a,b){return c[b]||a}):b}},{key:"_jsonArrayToModelList",value:function(a,b,c){return Array.isArray(c)?c.map(b.fromJSONObject.bind(null,a)):[]}},{key:"_expectedResponseFor",value:function(a){return{getAccounts:"accounts",getMailboxes:"mailboxes",getMessageList:"messageList",getThreads:"threads",getMessages:"messages"}[a]}}]),a}();c["default"]=f,b.exports=c["default"]},{}]},{},[1])(1)});